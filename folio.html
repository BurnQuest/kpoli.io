<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.rawgit.com/konvajs/konva/1.4.0/konva.min.js"></script>
    <div id="responsive-canvas"></div>
    <meta charset="utf-8">
    <link rel = "stylesheet" type="text/css" href="folio.css"/>
    <title>K POLI</title>

</head>
<body>

<script>
    var LOCAL_LIGHT = '#EDEEC0';
    var LOCAL_DARK =  '#33312E';

    var width = window.innerWidth;
    var height = window.innerHeight;



    var stage = new Konva.Stage({
        container: 'responsive-canvas',
        width:width,
        height: height,

    });

    window.addEventListener("resize", handleResize);

    var rectX = stage.getWidth() / 2 - 50;
    var rectY = stage.getHeight() / 2 - 25;
    var dockX = stage.getWidth()/2- 300;
    var dockY = stage.getHeight() - 70;

    var DEFAULT_WIDTH = 600;


    var startorb = new Konva.Group({
      x: 0,
      y: 0,


    });

    var i;
    var localx = 10;
    var localy = 10;
    for(i = 0; i < 3; i++){
      var tile = new Konva.Rect({
        name: 'tile_'.concat(toString(i)),
        x: (i < 1) ? localx : localx + (i*15),
        y: localy,
        width: 8,
        height: 8,
        fill: LOCAL_LIGHT,


      });
      startorb.add(tile);
    }

    var separator = new Konva.Rect({
      x: 65,
      y: 7,
      height: 16,
      width: 0.5,
      fill: LOCAL_LIGHT,
    });
    startorb.add(separator);


    var taskbar = new Konva.Rect({
      y: 0,
      x: 0,
      width: stage.getWidth(),
      height: 30,
      fill: LOCAL_DARK,
    });
    var dock = new Konva.Rect({
      name: 'dock',
      x: dockX,
      y: dockY,
      width: 600,
      height: 60,
      fill: LOCAL_DARK,
      cornerRadius: 4,
    });

    var backing = new Konva.Rect({
        name: 'windowbacking',
        x: rectX,
        y: rectY,
        width: DEFAULT_WIDTH,
        height: 300,
        fill: LOCAL_LIGHT,
        stroke: LOCAL_DARK,
            strokeWidth: 2,
        cornerRadius: 1,
        shadowColor: LOCAL_DARK,
            shadowBlur: 70,
            shadowOffset: {x : 10, y : 10},
            shadowOpacity: 0.5,
        opacity: 1,

    });


    var bar = new Konva.Rect({
        name: 'menubar',
        x: rectX,
        y: rectY,
        width: DEFAULT_WIDTH,
        height: 30,
        fill: LOCAL_DARK,


    });

    backing.on('mouseover', function() {
        document.body.style.cursor = 'default';
    });

    var labeltext = new Konva.Text({
      name: 'label',
      x: rectX,
      y: rectY,
      width: DEFAULT_WIDTH,
      text: '-  W  e  l  c  o  m  e  -',
      wrap: 'word',
      align: 'center',
      fontSize: 15,
      fontFamily: 'Courier',
      fill: LOCAL_LIGHT,
      padding: 7,
    });

    var bodytext = new Konva.Text({
      name: 'body',
      x: rectX,
      y: rectY + 30,
      width: 600,
      wrap: 'word',
      align: 'center',
      text: '\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSoftware | Film | Animation',
      fontSize: 15,
      fontFamily: 'Courier',
      fontStyle: 'italic',
      fontWeight: 'light',
      fill: LOCAL_DARK,
      padding: 7,
    });

    var dashbutton = new Konva.Circle({
      radius: 7,
      x: rectX + 580,
      y: rectY + 15,
      fill: LOCAL_LIGHT,
      padding: 9,

    })



    var wind  = new Konva.Group({
        x: 120,
        y: 40,
        draggable: true
    });

    var startpage = wind.clone();

    var highlight = new Konva.Rect({
      x: startpage.getWidth()/2,
      y: startpage.getHeight()/2,
      width: startpage.getWidth()/2,
      height: startpage.getHeight()/2,
      fill: LOCAL_DARK,
    });
    startpage.add(highlight);

    var windlayer = new Konva.Layer();
    var tasklayer = new Konva.Layer();
    var docklayer = new Konva.Layer();

    wind.add(backing);
    wind.add(bar);
    wind.add(labeltext);
    wind.add(bodytext);
    wind.add(dashbutton);

var xcoords = [];
var labelfills = ['Experience','Software Proficiencies','Language Skills','LanguageSkills'];
var textfills = [
  'TradeAssist- \n Comercial Photography \nWCPR- Castle Point Radio \n','sure', 'ok','>_\n| Python- Web, Visual Art, math\n| C/C++- Useful bash utilities and algorithm implementation\n| JavaScript- For HTML5 Canvas\n| HTML5 & CSS3- Creating useful websites with a focus on interface design\n| LaTeX- Typesetting for math and statistics\n '];


wind.on('dragstart', function() {
wind.moveToTop()} );

for(var i = 0; i < 4; i++){
//anonymous function for scoping, this tricked me for a while
  (function (){
  var wind2 = wind.clone({
    x: -window.innerWidth +550,
    y: -window.innerHeight + 550,
  });
  wind2.find('.label').setAttr('text',labelfills[i]);
  wind2.find('.body').setAttrs({
    text: textfills[i],
    align: 'left',

  });
  if(i == 3){
    wind2.find('.windowbacking').setAttr('fill',LOCAL_DARK);
    wind2.find('.body').setAttrs({
      fill: LOCAL_LIGHT,
      fontSize: 18,
      lineHeight: 1.6,
    });
    wind2.find('.menubar').setAttrs({
      shadowColor: 'black',
          shadowBlur: 70,
          shadowOffset: {x : 2, y : 2},
          shadowOpacity: 0.4,
    });
    wind2.cache();



  }

  windlayer.add(wind2);
  wind2.on('dragstart', function() {
  wind2.moveToTop()} );
  })();



}

  //  wind2.find('.menubar').destroy();

    tasklayer.add(taskbar);
    tasklayer.add(startorb);

    docklayer.add(dock);


    windlayer.add(wind);
    windlayer.add(highlight);


    stage.add(docklayer);
    stage.add(windlayer);
    stage.add(tasklayer);

//adds draw space to fit the window, makes taskbar and dock responsive
    function handleResize(){
      stage.setAttrs({
        width: window.innerWidth,
        height: window.innerHeight,
      });
      taskbar.setAttr('width',stage.getWidth());
      dock.setAttrs({
        x: stage.getWidth()/2- 300,
        y: stage.getHeight() - 70,
      });
      dockX = stage.getWidth()/2- 300;
      dockY = stage.getHeight() - 70;



      stage.draw();;
    }


    </script>
    </body>
</html>
